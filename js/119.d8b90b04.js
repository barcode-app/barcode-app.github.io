"use strict";(globalThis["webpackChunkbarcode_store"]=globalThis["webpackChunkbarcode_store"]||[]).push([[119],{2875:(e,t,a)=>{function i(e,t,a){return e?`${t} ${a}`:t}a.d(t,{$:()=>i})},2620:(e,t,a)=>{a.d(t,{O3:()=>s,OB:()=>o,Px:()=>n,de:()=>i});class i{constructor(e){this._settings={locale:"en-US",isAdmin:!1,globalDebug:!1,homePageDebug:!1,barCodePageDebug:!1,settingsPageDebug:!1},this.DB_KEY="SETTINGS",this._local=e.localStorage,null===this._local.getItem(this.DB_KEY)&&this._local.set(this.DB_KEY,JSON.stringify(this.getState()));const t=JSON.parse(this._local.getItem(this.DB_KEY)+"");this._settings=Object.assign(Object.assign({},this._settings),t)}saveData(){this._local.set(this.DB_KEY,JSON.stringify(this.getState()))}getState(){return this._settings}get locale(){return this._settings.locale}set locale(e){this._settings.locale=e}get isAdmin(){return this._settings.isAdmin}set isAdmin(e){this._settings.isAdmin=e}get globalDebug(){return this._settings.globalDebug}set globalDebug(e){this._settings.globalDebug=e}get barCodePageDebug(){return this._settings.barCodePageDebug}set barCodePageDebug(e){this._settings.barCodePageDebug=e}get homePageDebug(){return this._settings.homePageDebug}set homePageDebug(e){this._settings.homePageDebug=e}get settingsPageDebug(){return this._settings.settingsPageDebug}set settingsPageDebug(e){this._settings.settingsPageDebug=e}}class s{constructor(e,t=!1){this._saveState="",this._stateEngine=new e(t),this._debug=t}setState(e){this._dataObject=e}get stateString(){return JSON.stringify(this._dataObject)}beginEdit(){this._saveState=this.stateString,this._stateEngine.errors=[],this._debug&&console.log("StateManager beginEdit",this._saveState)}isDirty(){return this._debug&&console.log("StateManager isDirty",this._saveState!==this.stateString,this.stateString),this._saveState!==this.stateString}validate(){return this._debug&&console.log("StateManager validate"),this._stateEngine.validate(this._dataObject)}copyState(e){this._debug&&console.log("StateManager copyState"),this._stateEngine.copyState(e,this._dataObject)}restoreState(e){this._debug&&console.log("StateManager restoreState"),this._stateEngine.restoreState(e,JSON.parse(this._saveState))}get errors(){return this._stateEngine.errors}}class o{constructor(e){this._debug=e,this._errors=[]}get errors(){return this._errors}set errors(e){this._errors=e}validate(e){this._debug&&console.log("validate");let t=!0;return this._errors=[],""===e.caption&&(t=!1,this._errors.push("barcode-error-caption")),""===e.barCode&&(t=!1,this._errors.push("barcode-error-barcode")),t}copyState(e,t){this._debug&&console.log("copyState",e),t.caption=t.caption,t.barCode=t.barCode,t.expanded=t.expanded,t.tags=t.tags,t.notes=t.notes}restoreState(e,t){this._debug&&console.log("restoreState",e),e.caption=t.caption,e.barCode=t.barCode,e.expanded=t.expanded,e.tags=t.tags,e.notes=t.notes}}class n{constructor(e){this.KEY_BARCODE_DB="barcode-db",this._state={title:"",itemCaption:"",barcodeCaption:"",barCodes:[]},this._local=e.localStorage,null===this._local.getItem(this.KEY_BARCODE_DB)&&this._local.set(this.KEY_BARCODE_DB,JSON.stringify(this.getState()));const t=JSON.parse(this._local.getItem(this.KEY_BARCODE_DB)+"");this._state=Object.assign(Object.assign({},this._state),t)}getState(){return this._state}get stateString(){return JSON.stringify(this.getState())}restoreData(e){const t=JSON.parse(e);this._state=t}resetData(){this._state.title="",this._state.itemCaption="",this._state.barcodeCaption="",this._state.barCodes=[]}saveData(){this._local.set(this.KEY_BARCODE_DB,this.stateString)}get newItem(){return{caption:"",barCode:"",expanded:!1,tags:[],notes:""}}addBarCode(e){this._state.barCodes.push(e)}deleteBarCode(e){this._state.barCodes=[...this._state.barCodes.slice(0,e),...this._state.barCodes.slice(e+1)]}get barCodes(){return this._state.barCodes}get title(){return this._state.title}set title(e){this._state.title=e}get itemCaption(){return this._state.itemCaption}set itemCaption(e){this._state.itemCaption=e}get barcodeCaption(){return this._state.barcodeCaption}set barcodeCaption(e){this._state.barcodeCaption=e}}},119:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ae});var i=a(9835),s=a(499),o=a(6970),n=a(1957),l=a(1265);const r={name:"BarcodeGenerator",props:{value:[String,Number],format:[String],width:[String,Number],height:[String,Number],displayValue:{type:[String,Boolean],default:!0},text:[String,Number],fontOptions:[String],font:[String],textAlign:[String],textPosition:[String],textMargin:[String,Number],fontSize:[String,Number],background:[String],lineColor:[String],margin:[String,Number],marginTop:[String,Number],marginBottom:[String,Number],marginLeft:[String,Number],marginRight:[String,Number],flat:[Boolean],ean128:[String,Boolean],elementTag:{type:String,default:"svg",validator:function(e){return-1!==["canvas","svg","img"].indexOf(e)}}},render(){return(0,i.h)(this.elementTag,{id:["barcodegen"]})},mounted:function(){d.call(this)}};function d(){this.value;var e={format:this.format,width:this.width,height:this.height,displayValue:this.displayValue,text:this.text,fontOptions:this.fontOptions,font:this.font,textAlign:this.textAlign,textPosition:this.textPosition,textMargin:this.textMargin,fontSize:this.fontSize,background:this.background,lineColor:this.lineColor,margin:this.margin,marginTop:this.marginTop,marginBottom:this.marginBottom,marginLeft:this.marginLeft,marginRight:this.marginRight,flat:this.flat,ean128:this.ean128,valid:function(e){e},elementTag:this.elementTag};c(e),l(this.$el,this.value,e)}function c(e){Object.keys(e).forEach((t=>void 0===e[t]?delete e[t]:{}))}const g=r,u=g;var h=a(2620),b=a(2875),v=a(6611),_=a(9302),m=a(3130),p=a.n(m),S=a(6647),C=a(8339),f=function(e,t,a,i){function s(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,o){function n(e){try{r(i.next(e))}catch(t){o(t)}}function l(e){try{r(i["throw"](e))}catch(t){o(t)}}function r(e){e.done?a(e.value):s(e.value).then(n,l)}r((i=i.apply(e,t||[])).next())}))};const w={class:"col item-stretch"},y={class:"q-pa-xs"},D={key:0,class:"text-red"},x={class:"text-h6"},k={key:0},U={class:"row items-center"},q={class:"row"},O={class:"row items-center"},B={key:0},$={key:0},E={class:"row items-center q-pa-xs q-ma-sm q-mb-md"},N={class:""},P={class:"row items-center"},W={class:""},z={class:"text-subtitle1"},Z={class:""},V={class:"text-right q-gutter-xs self-center"},j={key:0},A={class:"col q-pa-xs"},H={key:1},K=(0,i.aZ)({__name:"BarCodev2",setup(e){const{t}=(0,S.QT)(),a=(0,_.Z)(),l=new h.de(a),r=(0,s.iH)(new h.Px(a)),d=(0,s.iH)([]),c=(0,s.iH)(),g=(0,s.iH)();(0,C.iS)(((e,i,s)=>{m&&console.log("onBeforeRouteLeave"),"list"!==K.value&&Y.isDirty()?a.dialog({title:t("confirm"),message:t("barcode-on-before-route-leave-warning"),ok:{label:t("barcode-yes")},cancel:{label:t("barcode-cancel")},focus:"cancel",persistent:!0}).onOk((()=>f(this,void 0,void 0,(function*(){-1!==J&&Y.restoreState(r.value.barCodes[J]),J=-1,s()})))).onCancel((()=>f(this,void 0,void 0,(function*(){s(!1)})))):s()})),(0,i.Jd)((()=>{m&&console.log("onBeforeUnmount"),r.value.saveData()}));const m=l.globalDebug||l.barCodePageDebug;let K=(0,s.iH)("list");const T=(0,s.iH)(r.value.newItem);let J=-1;const Y=new h.O3(h.OB,m),Q=(0,s.iH)("");function R(e){m&&console.log("selectHandler",e),T.value=r.value.barCodes[e],J=e,Y.setState(T.value),Y.beginEdit(),K.value="edit"}function I(){m&&console.log("updateHandler"),Y.isDirty()?ee()&&(Y.validate()?(r.value.saveData(),K.value="list",a.notify({message:t("updateNotify"),type:"positive",position:"center"})):d.value=Y.errors):a.notify({message:t("barcode-no-changes-warning"),type:"warning",position:"center"})}function M(){m&&console.log("cancelHandler"),Y.isDirty()?a.dialog({title:t("confirm"),message:t("barcode-on-before-route-leave-warning"),ok:{label:t("barcode-yes")},cancel:{label:t("barcode-cancel")},focus:"cancel",persistent:!0}).onOk((()=>f(this,void 0,void 0,(function*(){-1!==J&&Y.restoreState(r.value.barCodes[J]),J=-1,K.value="list"})))).onCancel((()=>f(this,void 0,void 0,(function*(){})))):K.value="list"}function L(e){m&&console.log("showBarcode");const t=!e.expanded;r.value.barCodes.forEach((e=>e.expanded=!1)),e.expanded=t}function G(e){m&&console.log("deleteHandler",e),a.dialog({title:t("confirm"),message:t("deleleConfirm"),ok:{label:t("barcode-yes")},cancel:{label:t("barcode-cancel")},focus:"cancel",persistent:!0}).onOk((()=>f(this,void 0,void 0,(function*(){r.value.deleteBarCode(e),r.value.saveData(),K.value="list",a.notify({message:t("deleteNotify"),type:"positive",position:"center"})}))))}function F(){T.value=r.value.newItem,J=-1,Y.setState(T.value),Y.beginEdit(),K.value="add"}function X(){Y.isDirty()?ee()&&(Y.validate()?(r.value.addBarCode(T.value),K.value="list",a.notify({message:t("saveNotify"),type:"positive",position:"center"})):d.value=Y.errors):a.notify({message:t("barcode-no-changes-warning"),type:"warning",position:"center"})}function ee(){var e,t;m&&console.log("uiValidation");let a=null===(e=c.value)||void 0===e?void 0:e.validate();return m&&console.log("controlBarCode",a),a=(null===(t=g.value)||void 0===t?void 0:t.validate())&&a,a}function te(e){m&&console.log("removeHandler",e),T.value.tags=[...T.value.tags.slice(0,e),...T.value.tags.slice(e+1)]}function ae(){m&&console.log("enterHandler"),T.value.tags.includes(Q.value)||(T.value.tags.push(Q.value),T.value.tags.sort(((e,t)=>e<t?-1:1)),Q.value="")}return r.value.barCodes.length>0&&(r.value.barCodes[0].expanded=!1,L(r.value.barCodes[0])),(e,t)=>{const a=(0,i.up)("q-btn"),h=(0,i.up)("q-chip"),_=(0,i.up)("q-card-section"),S=(0,i.up)("q-space"),C=(0,i.up)("q-card-actions"),f=(0,i.up)("q-separator"),Y=(0,i.up)("q-slide-transition"),ee=(0,i.up)("q-card"),ie=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(ie,{class:"q-pa-md"},{default:(0,i.w5)((()=>[(0,i._)("div",w,[["add","edit"].includes((0,s.SU)(K))?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,o.C_)((0,s.SU)(b.$)((0,s.SU)(m),"","bg-blue-2"))},[(0,i._)("div",{class:(0,o.C_)((0,s.SU)(b.$)((0,s.SU)(m),"row items-center","bg-red-2"))},[(0,i._)("div",{class:(0,o.C_)((0,s.SU)(b.$)((0,s.SU)(m),"text-h4 text-center col","bg-yellow-2"))},(0,o.zw)("add"===(0,s.SU)(K)?e.$t("addNew"):e.$t("edit")),3),(0,i._)("div",{class:(0,o.C_)((0,s.SU)(b.$)((0,s.SU)(m),"text-h4 q-pa-sm q-gutter-xs col-md-auto","bg-green-2"))},["add"===(0,s.SU)(K)?((0,i.wg)(),(0,i.j4)(a,{key:0,icon:"save",color:"green",round:"",onClick:X})):(0,i.kq)("",!0),"edit"===(0,s.SU)(K)?((0,i.wg)(),(0,i.j4)(a,{key:1,icon:"delete",color:"green",round:"",onClick:t[0]||(t[0]=e=>G((0,s.SU)(J)))})):(0,i.kq)("",!0),"edit"===(0,s.SU)(K)?((0,i.wg)(),(0,i.j4)(a,{key:2,icon:"save_as",color:"green",round:"",onClick:I})):(0,i.kq)("",!0),["add","edit"].includes((0,s.SU)(K))?((0,i.wg)(),(0,i.j4)(a,{key:3,icon:"cancel",color:"green",round:"",onClick:M})):(0,i.kq)("",!0)],2)],2),(0,i._)("div",y,[d.value.length>0?((0,i.wg)(),(0,i.iD)("div",D,[(0,i._)("div",x,(0,o.zw)(e.$t("barcode-validation-error")),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(d.value,((t,a)=>((0,i.wg)(),(0,i.iD)("div",{class:"q-pl-lg",key:a},(0,o.zw)(a+1)+". "+(0,o.zw)(e.$t(t)),1)))),128))])):(0,i.kq)("",!0)]),(0,i.Wm)((0,s.SU)(v.Z),{modelValue:T.value.caption,"onUpdate:modelValue":t[1]||(t[1]=e=>T.value.caption=e),ref_key:"controlCaption",ref:c,label:""===r.value.itemCaption?e.$t("itemCaption"):r.value.itemCaption,rules:[t=>!!t||e.$t("barcode-error-field-empty")]},null,8,["modelValue","label","rules"]),(0,i.Wm)((0,s.SU)(v.Z),{modelValue:T.value.barCode,"onUpdate:modelValue":t[2]||(t[2]=e=>T.value.barCode=e),ref_key:"controlBarCode",ref:g,label:""===r.value.barcodeCaption?e.$t("barCodeCaption"):r.value.barcodeCaption,rules:[t=>!!t||e.$t("barcode-error-field-empty")]},null,8,["modelValue","label","rules"]),(0,s.SU)(l).isAdmin?((0,i.wg)(),(0,i.iD)("div",k,[(0,i._)("div",{class:(0,o.C_)((0,s.SU)(b.$)((0,s.SU)(m),"","bg-red-2"))},[(0,i._)("div",U,(0,o.zw)(e.$t("barcode-tags-caption")),1),(0,i._)("div",q,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(T.value.tags,((e,t)=>((0,i.wg)(),(0,i.j4)(h,{key:e,onRemove:e=>te(t),removable:"",color:"primary","text-color":"white"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(e),1)])),_:2},1032,["onRemove"])))),128))]),(0,i._)("div",O,[(0,i._)("div",{class:(0,o.C_)((0,s.SU)(b.$)((0,s.SU)(m),"text-h4 text-center col","bg-yellow-2"))},[(0,i.Wm)((0,s.SU)(v.Z),{modelValue:Q.value,"onUpdate:modelValue":t[3]||(t[3]=e=>Q.value=e),label:e.$t("barcode-new-tag-caption"),onKeyup:(0,n.D2)(ae,["enter"])},null,8,["modelValue","label","onKeyup"])],2),(0,i._)("div",{class:(0,o.C_)((0,s.SU)(b.$)((0,s.SU)(m),"","bg-green-2"))},[(0,i.Wm)(a,{icon:"add",color:"green",round:"",dense:"",onClick:ae})],2)])],2),(0,i._)("div",null,[(0,i.Wm)((0,s.SU)(v.Z),{modelValue:T.value.notes,"onUpdate:modelValue":t[4]||(t[4]=e=>T.value.notes=e),filled:"",autogrow:"",label:"Notes"},null,8,["modelValue"])]),(0,s.SU)(m)?((0,i.wg)(),(0,i.iD)("div",B,[(0,i._)("pre",null,(0,o.zw)(JSON.stringify(T.value,null,4)),1)])):(0,i.kq)("",!0)])):(0,i.kq)("",!0)],2)):(0,i.kq)("",!0)]),null!==r.value.barCodes&&"list"===(0,s.SU)(K)?((0,i.wg)(),(0,i.iD)("div",$,[(0,i._)("div",E,[(0,i._)("div",{class:(0,o.C_)((0,s.SU)(b.$)((0,s.SU)(m),"col text-h4 text-center","bg-green-2"))},(0,o.zw)(""===r.value.title?e.$t("barcode"):r.value.title),3),(0,i._)("div",{class:(0,o.C_)((0,s.SU)(b.$)((0,s.SU)(m),"text-h4 text-right q-gutter-xs","bg-red-4")),style:{"min-width":"50px","max-width":"50px"}},[(0,i.Wm)(a,{icon:"add",color:"green",round:"",onClick:F})],2)]),(0,i._)("div",null,[(0,i.Wm)((0,s.SU)(p()),{class:"list-group",list:r.value.barCodes,handle:".handle",group:"people",itemKey:"barCode"},{item:(0,i.w5)((({element:t,index:l})=>[(0,i._)("div",N,[(0,i.Wm)(ee,{class:"q-pa-xs q-ma-sm q-mb-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{class:"row text-h5 q-pa-none"},{default:(0,i.w5)((()=>[(0,i._)("div",{class:(0,o.C_)((0,s.SU)(b.$)((0,s.SU)(m),"col","bg-blue-2"))},[(0,i._)("div",P,[(0,i.Wm)(a,{class:"handle",color:"green",flat:"",dense:"",icon:"drag_handle"}),(0,i._)("div",W,(0,o.zw)(t.caption),1)]),(0,i._)("div",z,(0,o.zw)(t.barCode),1)],2),(0,i._)("div",{class:(0,o.C_)((0,s.SU)(b.$)((0,s.SU)(m),"text-right q-gutter-xs self-center","bg-purple-2"))},[(0,i.Wm)(a,{icon:"edit",color:"green",round:"",onClick:e=>R(l)},null,8,["onClick"])],2)])),_:2},1024),(0,i.Wm)(C,{class:"row q-pa-none text-subtitle2"},{default:(0,i.w5)((()=>[(0,i.Wm)(S),(0,i._)("div",Z,(0,o.zw)(t.expanded?e.$t("hide"):e.$t("show"))+" "+(0,o.zw)(e.$t("barcode")),1),(0,i._)("div",V,[(0,i.Wm)(a,{color:"green",flat:"",dense:"",icon:t.expanded?"keyboard_arrow_up":"keyboard_arrow_down",onClick:e=>L(t)},null,8,["icon","onClick"])])])),_:2},1024),(0,i.Wm)(Y,null,{default:(0,i.w5)((()=>[(0,i.wy)((0,i._)("div",null,[(0,i.Wm)(f),(0,i.Wm)(_,{class:"text-subtitle2 text-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{value:t.barCode,margin:0,width:t.barCode.length<=10?1.5:1,height:75,format:"CODE39",lineColor:"black",elementTag:"canvas"},null,8,["value","width"])])),_:2},1024)],512),[[n.F8,t.expanded]])])),_:2},1024)])),_:2},1024)])])),_:1},8,["list"])]),(0,s.SU)(m)?((0,i.wg)(),(0,i.iD)("div",j,[(0,i._)("pre",A,(0,o.zw)(JSON.stringify(r.value,null,4)),1)])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),0===r.value.barCodes.length&&"list"===(0,s.SU)(K)?((0,i.wg)(),(0,i.iD)("div",H,(0,o.zw)(e.$t("barcode-no-record")),1)):(0,i.kq)("",!0)])),_:1})}}});var T=a(1639),J=a(9885),Y=a(4455),Q=a(7691),R=a(4458),I=a(3190),M=a(1821),L=a(136),G=a(9003),F=a(926),X=a(9984),ee=a.n(X);const te=(0,T.Z)(K,[["__scopeId","data-v-be1ec12a"]]),ae=te;ee()(K,"components",{QPage:J.Z,QBtn:Y.Z,QInput:v.Z,QChip:Q.Z,QCard:R.Z,QCardSection:I.Z,QCardActions:M.Z,QSpace:L.Z,QSlideTransition:G.Z,QSeparator:F.Z})}}]);